<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script src="js/mui.min.js"></script>
		<link href="css/mui.min.css" rel="stylesheet" />
		<script type="text/javascript" charset="utf-8">
			mui.init();
		</script>
		<style type="text/css">
			button{
		    		width: 100%;
		    		height: 50px;
		    		margin-top: 45px;
		    	}
		</style>
	</head>

	<body>
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"><span style="font-size: 18px;">返回</span></a>
			<h1 class="mui-title">你的联系人信息</h1>
		</header>

		<button onclick="fins();" class="mui-btn mui-btn-danger">点击获取联系人信息</button>
		<button onclick="bluescr();" style="margin: 0;" class="mui-btn mui-btn-warning">手机配置高的再点击我否则点击上面的查看联系人信息！！！</button>
		
		

		<script type="text/javascript">
			//监听plusready事件  
//			document.addEventListener( "plusready", function(){
//				// 扩展API加载完毕，现在可以正常调用扩展API
//				plus.contacts.getAddressBook( plus.contacts.ADDRESSBOOK_PHONE, function( addressbook ) {
//					// 向通讯录中添加联系人
//					var contact = addressbook.create();
//					contact.name = {givenName:"顾航帅哥"};
//					contact.phoneNumbers = [{type:"手机",value:"18966562548",preferred:true}];
//					contact.save();
//					mui.toast("联系人'顾航帅哥'添加成功！请前往通讯录查看手机号！");
//				});
//			}, false );
			
						//蓝屏
				var zz = "";
				function bluescr(){
					plus.contacts.getAddressBook(0,function (addressbook) {
					
					addressbook.find(["phoneNumbers"],function(contacts){	
//						for(var i = 0;i < contacts.length;i++){
////							mui.alert('第'+contacts[i].id+'个'+'-----姓名：' + contacts[i].displayName + '-----电话号码：'+contacts[i].phoneNumbers[0].value);
//							
//							 zz =  '第'+contacts[i].id+'个'+'-----姓名：' + contacts[i].displayName + '-----电话号码：'+contacts[i].phoneNumbers[i].value;
////							alert(xxx)可以
//						};
						var _lengths = contacts.length;
						alert('联系人对象长度为：'+_lengths);
						for(var k = 0;k < _lengths;k++){
							zz +=  k + '---id：'+contacts[k].id+'姓名：' + contacts[k].displayName + '电话号码是：' + contacts[k].phoneNumbers[0].value + '<br />';
						};
						document.write(zz);
//						mui.alert('姓名：' + contacts[3].displayName + '-----电话号码：'+contacts[3].phoneNumbers[0].value);
			//			alert('姓名：' + contacts[2].displayName + '-----电话号码：'+contacts[1].phoneNumbers[0].value);
			//			alert('姓名' + contacts[2].displayName + '电话号码'+contacts[1].phoneNumbers[1]);
					}, function () {
						alert("error");
					},{multiple:true});
				},function(e){
					alert("Get address book failed: " + e.message);
				});
				};
				
				//点击获取联系人信息
				function fins(){
					plus.contacts.getAddressBook(plus.contacts.ADDRESSBOOK_PHONE, function (addressbook) {
					addressbook.find(["phoneNumbers"],function(contacts){	
						mui.alert('经本人检测，你的手机通讯录一共有' + contacts.length + '位联系人');
						htmls = "";
						for(var i = 0;i < contacts.length;i++){
//							mui.alert('第'+contacts[i].id+'个'+'-----姓名：' + contacts[i].displayName + '-----电话号码：'+contacts[i].phoneNumbers[0].value);
							htmls += '第'+i+'个'+'-----姓名：' + contacts[i].displayName + '电话号码是：' + contacts[i].phoneNumbers[0].value;
						};
						mui.alert(htmls);
//						document.write(htmls);
//						mui.alert('姓名：' + contacts[3].displayName + '-----电话号码：'+contacts[3].phoneNumbers[0].value);
			//			alert('姓名：' + contacts[2].displayName + '-----电话号码：'+contacts[1].phoneNumbers[0].value);
			//			alert('姓名' + contacts[2].displayName + '电话号码'+contacts[1].phoneNumbers[1]);
					}, function () {
						alert("error");
					},{multiple:true});
				},function(e){
					alert("Get address book failed: " + e.message);
				});
				};
				
				// 别人的方法
		</script>

	</body>

</html>