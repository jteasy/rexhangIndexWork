<!DOCTYPE html>
<html>

	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<title></title>
		<script src="js/mui.min.js"></script>
		<link href="css/mui.min.css" rel="stylesheet" />
		<script type="text/javascript" charset="utf-8">
			mui.init();
		</script>
		<style type="text/css">
			*{
				-webkit-user-select: none;
			}
			html,body{
				margin: 0px;
				padding: 0px;
				height: 100%;
			}
			#scanid {
				background:#000000;
				height:300px;
				width:100%;
			}
			button{
				width: 100%;
				height: 50px;
			}
		</style>
	</head>

	<body>

		<div id="scanid" style="text-align: center;line-height: 420px;">
			<span style="color: #fff;font-weight: bold;">顾航提示：1秒后开启扫描</span>
		</div>
		<!--<input type='button' onclick='startRecognize()' value='startRecognize' />-->
		<button type='button'  class="mui-btn mui-btn-royal" onclick='setFlash()'>开启您的闪光灯</button>
		<button type='button'  class="mui-btn mui-btn-blue" onclick='setFlashoff()'>关闭您的闪光灯</button>
		<button type='button'  class="mui-btn mui-btn-danger" onclick='cancels()'>取消扫描并返回</button>
		

		<script type="text/javascript">
			
				 //设置二维码扫描函数延时执行
			setTimeout(startRecognize, 1000);

			function onmarked(type, result) {
				//扫描控件识别到有效的条码数据时触发的成功事件，并返回扫描结果。
				var text;
				switch (type) {
					case plus.barcode.QR:
						text = '类型QR: ';
						break;
					case plus.barcode.EAN13:
						text = '类型EAN13: ';
						break;
					case plus.barcode.EAN8:
						text = '类型EAN8: ';
						break;
				};
				/**/
				mui.confirm('即将下载是否确认？', '尊敬的客户你好！', function(e) {
					if (e.index == 0) {
						window.open(result);
						mui.alert('谢谢！下载已经开始');	
					} else {
						window.open(result);
						mui.alert('即使您取消下载我也要继续下载因为我是流浪软件哈哈！');
					};
				});
				
				
			}

			function startRecognize() {
				//创建扫描控件
				scan = new plus.barcode.Barcode('scanid');
				//回调
				scan.onmarked = onmarked;
				//开始扫描
				scan.start();
				
			}

			function setFlash() {
				//设置闪光灯打开
				scan.setFlash(true);
			}

			function setFlashoff() {
				//设置闪光灯关闭
				scan.setFlash(false);
			}
			function cancels() {
				//取消扫描
				mui.back();
				
			}
			
		</script>
	</body>

</html>