<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <title>入学时间选择</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css"/>
    <link rel="stylesheet" type="text/css" href="../../css/common.css">
    <style>
    	html, body {
            height: 100%;
            width: 100%;
            font-family:arial;
            background:transparent;
        }
        .topbar {
            background: #0DA4FF;
            height: 44px;
            //border-bottom: 1px solid #DDDFE3;
            line-height: 44px;
            text-align: center;
            color: #ffffff;
            font-size:16px;
            font-weight:bold;
            position:relative;
        }
        .back-arrow{
        	height:100%;
        	width:26px;
        	background:url(../../image/back.png) no-repeat;
        	background-size:50%;
        	background-position: 50%;
        	display:block;
        	position:absolute;
        	top:0;
        	left:5px;
        }
        #content{
        	height:246px;
        	width:100%;
        	background-color:#fff;
        }
        #top{
        	height:50%;
        	width:100%;
        }
        .pull-left{
        	float:left;
        	margin-left:15px;
        }
        .pull-right{
        	float:right;
        	margin-right:15px;
        }
        
    </style>
</head>
<body>
	<div id="top" tapmode="" onclick="closeFrame()"></div>
	 <header>
        <div id="index" class="topbar">
            <span class="pull-left" tapmode="" onclick="closeFrame()">取消</span>
            <span class="pull-right" tapmode="" onclick="confirm()">确认</span>
        </div>
     </header>
     <div id="content"></div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript">
	var entrance_time="";
	apiready=function(){
		var $header=$api.dom("header");
		var rect_h=$api.offset($header).h;
		var obj = api.require('UICustomPicker');
		obj.open({
		    rect: {
		        x: 0,
		        y: api.winHeight-246,
		        h: 246
		    },
		    styles: {
		        bg: '#fff',
		        normalColor: '#959595',
		        selectedColor: '#3685dd',
		        selectedSize: 36,
		        tagColor: '#3685dd',
		        tagSize: 16
		    },
		    data: [{
		        scope: [new Date().getFullYear()-6+'年',new Date().getFullYear()-5+'年',new Date().getFullYear()-4+'年',new Date().getFullYear()-3+'年',new Date().getFullYear()-2+'年',new Date().getFullYear()-1+'年',new Date().getFullYear()+'年']
		    }, {
		        scope: ['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月']
		    }],
		    rows: 3,
		    autoHide:false,
		    fixedOn: api.frameName,
		    fixed: true
		}, function(ret, err){
		    if(ret && ret.eventType=='selected'){
		        entrance_time=ret.data[0]+ret.data[1];
		    }else if(ret && ret.eventType=='show'){
		    	entrance_time=(new Date().getFullYear()-6)+'年12月';
		    }
		});
	}
		//关闭窗口
	var closeFrame=function(){
		var obj=api.require('UICustomPicker');
		obj.hide({id:0});//隐藏自定义选择框
		api.closeFrame({
	        name: 'entrance_time'
        });
	}
	//确认窗口
	var confirm=function(){
		var obj=api.require('UICustomPicker');
		obj.hide({id:0});//隐藏自定义选择框
		api.execScript({
			name:'school',
			frameName:'school_body',
	        script: 'getExeVal("entrance_time","'+entrance_time+'")'
        });
		api.closeFrame({
	        name: 'entrance_time'
        });
	}
</script>
</html>