<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>个人资料</title>
    <link rel="stylesheet" type="text/css" href="../../css/api.css" />
    <link rel="stylesheet" type="text/css" href="../../css/common.css" />
    <style type="text/css">
        *{
            margin: 0;
            padding: 0;
        }
        body{
            font-size: 12px;
            font-family: '微软雅黑';
            position: absolute;
            bottom: 0;
        }
        .container{
            width: 100%;
        }
        .container .content{
            margin: 14px 14px 0 14px;
        }
        .container .content .c_left{
            float: left;
            width: 125px;
            height: 80px;
            border: 1px solid #C9C9C9;
            text-align: center;
            background: #F2F2F2;
            border-radius: 4px; 
        }
        .container .content .b_radius{
            margin-top: 14px;
            width: 50px;
            height: 35px;
            background: #E4E4E4;
            border-radius: 50%;
            margin-left: 37px;
        }
        .container .content .c_right{
            background: #F2F2F2;
            float: right;
            width: 125px;
            height: 80px;
            border: 1px solid #C9C9C9;
            text-align: center;
        }
        .shenhe{
            margin-top: 5px;
            color: #666;
        }
        .tex-info{
            margin-top: 10px;
            color: #666;
            margin-bottom: 12px;
        }
        .container #btns{
            margin-left: 12px;
            margin-right: 12px;
        }
        .container .btn{
            height: 50px;
            background: #0DA4FF;
            width: 100%;
            display: block;
            text-align: center;
            line-height: 50px;
            color: #fff;
            font-size: 18px;
            border-radius: 4px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="content">
            <!-- picShow start -->
            <div class="c_left"  tapmode="" onclick="openCamera(this,'widh_id_card')" id="with_id_card">
                <div class="b_radius"></div>
                <p class="shenhe">本人审核照</p>
            </div>

            <!-- 清除浮动 -->
            <div style="clear:both;"></div>
            <!-- picShow end -->
            <p class="tex-info">1.手持身份证半身照，拍照时拍出持证手臂，以证实是本人手持</p>
            <!-- area2 -->
            <!-- picShow start -->
            <div class="c_left"  tapmode="" onclick="openCamera(this,'id_front')" id="id_front">
                <div class="b_radius"></div>
                <p class="shenhe">本人审核照</p>
            </div>
            <div class="c_right"  tapmode="" onclick="openCamera(this,'id_fback')" id="id_fback">
                <div class="b_radius"></div>
                <p class="shenhe">本人审核照2</p>
            </div>
            <!-- 清除浮动 -->
            <div style="clear:both;"></div>
            <!-- picShow end -->
            <p class="tex-info">2.身份证照需拍摄两张，分别为正面和反面</p>
            <!-- area3 -->
            <!-- picShow start -->
            <div class="c_left" tapmode="" onclick="openCamera(this,'stu_front')" id="stu_front">
                <div class="b_radius"></div>
                <p class="shenhe">本人审核照</p>
            </div>
            <div class="c_right" tapmode="" onclick="openCamera(this,'stu_back')" id="stu_back">
                <div class="b_radius"></div>
                <p class="shenhe">本人审核照2</p>
            </div>
            <!-- 清除浮动 -->
            <div style="clear:both;"></div>
            <!-- picShow end -->
            <p class="tex-info">3.学生证照需拍摄两张，分别为封面和内页</p>
        </div>
        <div id="btns">
            <div href="javascript:void(0);" class="btn">确定</a>
        </div>
    </div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript">
	var openCamera=function(obj,obj_name){
		api.getPicture({
	    sourceType: 'camera',
	    encodingType: 'jpg',
	    mediaValue: 'pic',
	    destinationType: 'url',
	    allowEdit: true,
	    quality: 50,
	    saveToPhotoAlbum: false
		}, function(ret, err){ 
		    if (ret) {
		    	if(ret.data!=''){
		    		var imgurl=ret.data;//图片地址
		    		var imgname=new Date().getTime(); //重命名图片名称
		    		api.setPrefs({
	                    key:'id_card',
	                    value:imgurl
                    });
                    $api.setStorage('id_card',imgurl);
			    	$api.html(obj,'<img src="'+ret.data+'" width="127" height="82">');
			    }
		    }
		});
	}
	apiready=function(){
		api.getPrefs({
	        key:'id_card'
        },function(ret,err){
        	if(ret){
        		alert(ret.value);
        		$api.html($api.byId("with_id_card"),'<img src="'+ret.value+'" width="127" height="82">');
        	}
        });
	}  
</script>
</script>
</html>