<!doctype html>
<html>
<head>
	<!--声明当前页面的编码集：charset=GBK,GB2312(中文编),UTF-8(国际编码)-->
	<meta http-equiv="Content-Type"content="text/heml;charset=UTF-8">
	<!--当前页面的三要素-->
	<title>标题</title>
	<meta name="Keywords" content="关键词，关键词">
	<meta name="description" content="">
	<!--css.js-->
	<link rel="stylesheet" href="/css/bg2.css" type="text/css" />
	<style type="text/css">
	*{margin:0;padding:0;}
	body{font-size:12px;font-family:"微软雅黑";color:#666;}
	.desk{width:200px;background:#fff;display:none;position:absolute;z-index:2;}
	.desk ul{box-shadow:0 0 15px 1px;}
	.desk ul li{border-bottom:1px solid #000;list-style:none;cursor:pointer;
	line-height:34px;font-size:14px;padding-left:10px;background:#282828;
	border-top:1px solid #414141;}
	.desk ul li:hover{background:#28b779;}
	.signbox{z-index:1;width:294px;height:310px;position:relative;}
	.signbox .s_list{width:294px;height:310px;position:absolute;}
	.signbox .s_list .s_content{width:256px;height:220px;
	position:absolute;top:60px;left:16px;outline:none;font-size:14px;color:#000;}
	.signbox .s_list .s_s{position:absolute;bottom:10px;left:20px;}
	h1{text-align:center;color:#0f0;}
	</style>
	<link rel="stylesheet" href="/css/animate.css" type="text/css"></link>
	</head>
<body>
<h1>请点击右键查看效果</h1>
	<div class="desk">
		<ul>
			<li onclick="tz_menu(1)">新建文件夹</li>
			<li onclick="tz_menu(2)">添加便签</li>
			<li onclick="tz_menu(3)">清空便签</li>
			<li onclick="tz_menu(4)">刷新</li>
			<li onclick="tz_menu(5)">上传资料</li>
			<li onclick="tz_menu(6)">更换背景</li>
			<li onclick="tz_menu(7)">注销</li>
		</ul>
	</div>
	<div class="signbox">
		
	</div>
<script src="/js/jquery-1.11.1.min.js" type="text/javascript"></script>
<script type="text/javascript">

//自动保存时间
		var timer=null;
		function auto_timer(){
		var count=3;
		timer = setInterval(function(){
		if(count<=0){
		count=3;
		//保存内容
		localStorage.setItem("label",$(".signbox").html());
		};
		$(".s_s").find("span").text(count);
		count--;
		},1000);
		};


	// 屏蔽浏览器右键
	document.oncontextmenu = function(){
		return false;
		}
		$(document).mousedown(function(e){
		var key = e.which;
		if(key == 3){
		//获取鼠标X轴坐标
		var x = e.clientX;
		//获取鼠标Y轴坐标
		var y = e.clientY;
		$(".desk").show().css({left:x,top:y})
		}
		});
		$(document).click(function(){
		$(".desk").hide();
		});
		var a = [];
		var rand = 0;
		function tz_menu(flag){
			var and =null;
			//生成1-3随机数
		var random=Math.floor(Math.random() * 3) + 1;
		if(flag == 2){
			rand = Math.floor(Math.random() * 15) + 1;
			 a = new Array('pulse','bounce','tada','swing','wobble','flip','flipInX','flipInY','fadeIn','fadeInUp','fadeInUpBig','bounceIn','rotateIn','rollIn');
			var left = $(".desk").offset().left;
			var top = $(".desk").offset().top;
			and = a[rand];//随机选择特效
			$(".signbox").append("<div class='s_list animated "+and+"' style='left:"+left+"px; top:"+top+"px;'>"+
			"<img src='/demo/js+jquery/desk/images/"+random+".jpg' alt='便签' width='294' height='310'/>"+
			"<div class='s_content' contenteditable='true'></div>"+
			"<p class='s_s'><span>3</span>秒后自动保存</p>"+
		"</div>");
		auto_timer();
		};
		if(flag == 3){
			var b = new Array("flipOutX","flipOutY","hinge","rotateOut");	
			var cle=Math.floor(Math.random() * 4) + 1;
			$(".s_list").removeClass("animated "+and+"").addClass("animated "+b[cle]+"").fadeOut(1000);
			timer = null;
			localStorage.setItem("label",null);
		};
		};

		
		//读取缓存信息
		$(function(){
		 var label = localStorage.getItem("label");
		 if(label!=null){
		 $(".signbox").html(label)
		 auto_timer();
		 };
		 auto_timer();
		});
</script>
</body>
</html>