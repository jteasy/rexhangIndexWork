<!doctype html>
<html>
<head>
	<!--声明当前页面的编码集：charset=GBK,GB2312(中文编),UTF-8(国际编码)-->
	<meta http-equiv="Content-Type"content="text/heml;charset=UTF-8">
	<!--当前页面的三要素-->
	<title>多个DIV拖拽</title>
	<meta name="Keywords" content="关键词，关键词">
	<meta name="description" content="">
	<!--css.js-->
	<link rel="stylesheet" href="/css/bg2.css" type="text/css" />
	<style type="text/css">
	*{margin:0;padding:0;}
	.box{
	overflow:hidden;
	border-radius:5px;
	width:400px;
	height:200px;
	background:#93f;
	box-shadow:0 0 30px #0c3;
	position:absolute;
	top:50px;
	left:100px;
	}
	.box .title{
	width:100%;
	height:50px;
	line-height:50px;
	text-align:center;
	position:absolute;
	cursor:move;
	background:#f60;
	text-decoration:none;
	}
	
	</style>
	</head>
<body oncontextmenu="return false;">
	<div class="box" style="z-index: 0; top: 35px; left: 641px;">
		<div class="title">这是一个DIV层1</div>
	</div>
	<div class="box" style="left: 250px; z-index: 2; top: 199px;">
		<div class="title" >这是一个DIV层2</div>
	</div>
	<div class="box" style="left: 680px; z-index: 0; top: 283px;">
		<div class="title" >这是一个DIV层3</div>
	</div>
	<script src="/js/jquery-1.11.1.min.js" type="text/javascript"></script>
	<script>
		$(function(){
		//再做一个产品，如果没有问题那就是最严重的问题
		//javascript 所有事件的顶级父类是Event
		//鼠标悬浮事件
		var mark = false;
		
				  
				  //鼠标按下事件
				  $(".box").children("div").mousedown(function(e){
				  $this = $(this);
				  var x = e.clientX;
				  var y = e.clientY;
				  var top = $this.offset().top;
				  var left = $this.offset().left;  
				  
				  //绑定元素的拖动事件，不要绑定在元素本身上面，而是绑定在doucument
				  mark = true;
					  $(document).mousemove(function(e){
					  if(mark){
						  $this.parent().css("z-index",2).siblings().css("z-index",0);
					  var nx = e.clientX - x + left;
					  var ny = e.clientY - y + top;
					  var width = $(document).width()-410;
					  var height = $(document).height()-210;
					  if(nx>=width)nx=width;
					  if(ny>=height)ny=height;
					  if(nx<=10)nx=10;
					  if(ny<=10)ny=10;
					  $this.parent(".box").css({top:ny,left:nx});
			};


		  }).mouseup(function(){
					mark = false;
		  });


		  });//鼠标按下事件结束
		});//鼠标悬浮事件结束



	</script>

</body></html>