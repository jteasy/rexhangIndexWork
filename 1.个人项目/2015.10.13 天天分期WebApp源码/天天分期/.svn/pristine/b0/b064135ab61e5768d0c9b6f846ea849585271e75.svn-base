<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0"/>
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>资料填写</title>

    <link rel="stylesheet" type="text/css" href="/css/common.css" />
    <style type="text/css">
        *{
            margin: 0;
            padding: 0;
        }
        body{
            overflow: hidden;
            font-size: 12px;
            font-family: "Helvetica Neue", Helvetica, STHeiTi, sans-serif;
            background: #1f9aff;
        }
        .content{
            -webkit-transition: all ease-in-out 0.3s;
            width: 90%;
            position: absolute;
            top: 20px;
            left: 5%;
        }
        .card2 , .card3 , .card4{
            -webkit-transition: all ease-in-out 0.3s;
        }
        .cnts , .c_2 , .c_3 , .c_4{
            -webkit-transition: all ease-in-out 0.3s;   
        }
        .cnts{
            margin: 0 20px 0 20px;
            background: #fff ;
            -webkit-border-radius: 10px;
            height: 150px;
            border: 1px solid #d8d8d8;
            position: relative;
        }
        .content .friendsss{
            position: absolute;
            /*left: calc(50% - 75px);*/
            /*top: 40px;*/
        }
        .flag{
            margin: 10px 0 0 0;
            width: 100px;
            height: 35px;
            float: left;
            position: relative;
        }
        .friends{
            float: left;
            margin: 18px 0 0 0;
            font-size: 16px;
            color: #666;
            /*padding-left: calc(50% - 100px);*/
        }
        .cosal{
            height: 50px;
            padding: 20px 10% 0 10%;
            position: absolute; 
            top: 320px;
        }
        .co_fonts{
            display: block;
            word-break: break-word;
            text-indent: 40px;
        }
        .one{
            -webkit-transition: all ease-in-out 0.3s;
            width: 94%;
            position: absolute;
            top: 24%;
            left: 3%;
            
        }
        .selectfalse{-moz-user-select: none; -o-user-select:none; -khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none; user-select:none}
        .tit{
            margin-top: 12%;
            font-size: 16px;
            color: #fff;
            text-align: center;
        }
    </style>
</head>
<p class="tit">完善正确的资料让你的申请更快的通过</p>
<body class="selectfalse">
        <div class="content page1 one" tapmode="#" style="position:relative;">
            <div class="cnts hba" >
                <div class="flag" style="width: 70px;">
                    <img src="../../image/greens.png" alt="pink" width="70" height="35" tapmode="" onclick="openWin('personal_header')" />
                    <p style="position:absolute;top:9px;left:10px;color:#fff;" id="personal_status">未完成</p>
                </div>
                <p class="friends">个人信息</p>
                <div style="clear: both;"></div>
                <img id="hb" class="friendsss" src="../../image/personal.png" alt="friends" width="75" height="75"  tapmode="" onclick="openWin('personal_header')" />  
                <p style="position:absolute;left:10%;bottom:10px;overflow:hidden;width:80%;max-height:66px;text-align:center;color:#666;">朋友和伙伴比信用更有价值</p>
            </div>

        </div>

        <div class="content myself" tapmode="#">
            <div class="cnts xinxia" >
                <div class="flag" style="width: 70px;">
                    <img src="../../image/pinks.png" alt="pink" width="70" height="35"  tapmode="" onclick="openWin('friend_header')" />
                    <p style="position:absolute;top:9px;left:10px;color:#fff;" id="friend_status">未完成</p>
                </div>
                <p class="friends personalinfo">我的伙伴</p>
                <div style="clear: both;"></div>
                <img class="friendsss" id="xx" src="../../image/friends.png" alt="friends" width="75" height="75"  tapmode="" onclick="openWin('friend_header')" /> 
                <p style="position:absolute;left:10%;bottom:10px;overflow:hidden;width:80%;max-height:66px;text-align:center;color:#666;">无误的个人信息更快获取申请</p>
            </div>
        </div>

        <div class="content school" tapmode="#">
            <div class="cnts xuexiaoa" >
                <div class="flag" style="width: 70px;">
                    <img src="../../image/yellows.png" alt="pink" width="70" height="35"  tapmode="" onclick="openWin('school_header')" />
                    <p style="position:absolute;top:9px;left:10px;color:#fff;"  id="school_status">未完成</p>
                </div>
                <p class="friends ">学校信息</p>
                <div style="clear: both;"></div>
                <img class="friendsss" id="xxxx" src="../../image/school.png" alt="friends" width="75" height="75"  tapmode="" onclick="openWin('school_header')" /> 
                <p style="position:absolute;left:10%;bottom:10px;overflow:hidden;width:80%;max-height:66px;text-align:center;color:#666;">签约前要预留完整的学校信息</p>
            </div>
        </div>

        <div class="content card" tapmode="#">
            <div class="cnts zhengjiana" >
                <div class="flag" style="width: 70px;">
                    <img src="../../image/blues.png" alt="pink" width="70" height="35"  tapmode="" onclick="openWin('card_header')" />
                    <p style="position:absolute;top:9px;left:10px;color:#fff;"  id="card_status">未完成</p>
                </div>
                <p class="friends zjxx">证件信息</p>
                <div style="clear: both;"></div>
                <img class="friendsss" id="bm" src="../../image/zj_info.png" alt="friends" width="75" height="75"   tapmode="" onclick="openWin('card_header')"/>  
                <p style="position:absolute;left:10%;bottom:10px;overflow:hidden;width:80%;max-height:66px;text-align:center;color:#666;">让证件证明你自己</p>
            </div>
        </div>
   <div class="cosal">
    <span class="co_fonts"></span>
   </div>

   <div class="btn" style="border-top:1px solid #d8d8d8;margin:0;width:100%;height:50px;text-align:center;position:absolute;bottom:0;z-index:9999;font-size:16px;color:#fff;">
    <div class="btns" style="font-size:22px;height:50px;line-height:50px;color:#0DA4FF;background:#FFF;">确认申请</div>
   </div>
</body>
<script type="text/javascript" src="../../script/api.js"></script>
<script type="text/javascript" src="../../script/zepto.min.js"></script>

<script type="text/javascript">
    //卡片切换
  $(function(){
    
    
    document.body.style.overflow = "hidden";
                        /*兼容性图片居中*/
                        // margin 20+20
                        var _width = ($(".card").width() - 42) / 2;
                        var _width2 = ($(".cnts").width() - 42) / 2;

                        var friLeft = _width  - 75;
                        var friLeft2 = _width2  - 35;
                        var dpi = screen.height;     
                        var domH = dpi / 4;
                       
                           if(dpi == 1280){
                                                            var dpi = screen.height;
                                                            $(".cnts").height("220px");
                                                            $(".zhengjiana").height("220px");
                                                            $(".xuexiaoa").height("220px");
                                                            $(".xinxia").height("220px");
                                                            $(".friendsss ").css("margin-left","-37.5px");
                                                            
                                                        }
                        
                            if(dpi <= 480){
                                var dpi = screen.height;
                                var domH = dpi / 3;
                                $(".cnts").height(domH / 1.5 + 28 +20);
                                document.getElementById("hb").style.width = "80px";
                                document.getElementById("hb").style.height = "80px";
                                document.getElementById("xx").style.width = "80px";
                                document.getElementById("xx").style.height = "80px";
                                document.getElementById("xxxx").style.width = "80px";
                                document.getElementById("xxxx").style.height = "80px";
                                document.getElementById("bm").style.width = "80px";
                                document.getElementById("bm").style.height = "80px";
                                $(".friendsss ").css("margin-left","-40px");
                                
                                alert(111);
                            } else if(481 <= dpi <= 699){
                                var dpi = screen.height;
                                var domH = dpi / 4 + 20;
                                $(".friendsss ").css("margin-left","-37.5px");
                                $(".cnts").height(domH+"px");
                                
                            }else{
                                var dpi = screen.height;
                                var domH = dpi / 4 + 20;
                                
                                $(".friendsss ").css("margin-left","-37.5px");
                                $(".cnts").height(domH+"px");
                                
                                alert(444);
                            }
                            
                            
                            
                        
                        // alert(domH);
                        
//                         $(".friendsss ").css("left",friLeft + "px").css("top","60px");
                           $(".friendsss ").css("left","50%").css("top","48px");
                           

                           

                        //文字兼容
                        $(".cnts").css("position","relative")
                       $(".friends").css("position","absolute").css("left","50%").css("margin-left","-35px");
                        /*兼容性图片居中*/
        var h = document.documentElement.clientHeight,//浏览器可视高度
            w = document.documentElement.clientWidth,//浏览器可视宽度
            dir = 45 ,//定义每个卡包交替的差值
            len = $(".content").length,//总共卡包的数量
            scale = 0.9,//卡包比例
            hw = $(".content").eq(0).width()*0.7,//初始化最底层的宽度
            sw;//中间变量
            $(window).resize(function(){
                h = document.documentElement.clientHeight;//浏览器可视高度
                w = document.documentElement.clientWidth;//浏览器可视宽度
                init ();
            });
            init ();
        /*初始化卡包布局 */
        function init () {
            sw = hw
            var i = 3;
            $(".content").each(function(){
                if($(this).hasClass('one')){
                    $(this).attr("style","");
                }else{
                    sw = sw / scale;
                    $(this).css({
                        overflow:'hidden',
                        height:45,
                        top: h - dir*(i)-50,
                        zIndex: len-i,
                        width:100-6*i+"%",
                        left:3*i+"%"
                    });
                i--;
                };
            });
        };
        //点击触发切换
        $(".content").on("click",function() {
            $(this).addClass('one').siblings().removeClass('one');
            init();
        });
    });


	var openWin=function($url){
		var $name=$url.split('_');
		api.openWin({
	        name: $name[0],
	        url: $url+'.html',
	        pageParam:{amount:api.pageParam.amount,fqs:api.pageParam.fqs},
	        animation:{
	        	type:'movein',
	        	subType:'from_right'
	        },
	        scrollToTop:true,
	        reload:true
        });
	}
	//供远程执行刷新当前页面
	var reload=function(){
        //首先学校api
		//location.reload;
        var personal_status = $api.getStorage('personal_status');
        var school_status = $api.getStorage('school_status');
        var card_status = $api.getStorage('card_status');
        var contact_status = $api.getStorage('contact_status');
		var baseinfo=$api.getStorage('baseinfo');
				if(baseinfo!='' && baseinfo!=null && baseinfo.all_status==true){
                    $api.text($api.byId('personal_status'),'已填写');
                    $api.text($api.byId('friend_status'),'已填写');
                    $api.text($api.byId('school_status'),'已填写');
                    $api.text($api.byId('card_status'),'已填写');
        			$api.attr($api.dom('.btns'),'onclick',"openWin('apply_header')");
        		}else if(personal_status==true && school_status==true && card_status==true && contact_status){
                    $api.attr($api.dom('.btns'),'onclick',"openWin('apply_header')");
                    $api.text($api.byId('personal_status'),'已填写');
                    $api.text($api.byId('friend_status'),'已填写');
                    $api.text($api.byId('school_status'),'已填写');
                    $api.text($api.byId('card_status'),'已填写');
                }else{
                    $api.attr($api.dom('.btns'),'onclick','toastinfo();');
                    if(personal_status==true){
                        $api.text($api.byId('personal_status'),'已填写');
                    }
                    if(school_status==true){
                        $api.text($api.byId('school_status'),'已填写');
                    }
                    if(card_status==true){
                        $api.text($api.byId('card_status'),'已填写');
                    }
                    if(contact_status){
                        $api.text($api.byId('friend_status'),'已填写');
                    }
                }

	}
	apiready=function(){
		
		//把四个类目的填写状态放入localstorage
		var baseinfo = $api.getStorage('baseinfo');
                            if(baseinfo.school){
                                 $api.setStorage('school_status', baseinfo.school.status);
                            }else{
                                 $api.setStorage('school_status', false);
                            }
                            if(baseinfo.info){
                                 $api.setStorage('personal_status', baseinfo.info.status);
                            }else{
                                $api.setStorage('personal_status', false);
                            }
                            if(baseinfo.photo){
                                $api.setStorage('card_status', baseinfo.photo.status);
                            }else{
                                $api.setStorage('card_status', false);
                            }
                            if(baseinfo.contact.one_status && baseinfo.contact.two_status && baseinfo.contact.three_status && baseinfo.contact.four_status){
                                contact_status = true;
                            }else{
                                contact_status = false;
                            }
                            $api.setStorage('contact_status', contact_status);
       reload();
	}
    var toastinfo = function(){
        api.toast({
            msg: '信息填写不完全',
            duration: 2000,
            location: 'middle'
        });
    }
</script>
</html>